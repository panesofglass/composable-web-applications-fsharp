<!doctype html>  
<html lang="en">
	
	<head>
		<meta charset="utf-8">
		
		<title>F# for C# Developers</title>

		<meta name="description" content="F# is Microsoft's functional programming language for .NET. You may have heard about F# and wondered how it might fit in with your C#-based solutions. F# provides a powerful set of features that make working with data a breeze and that works with your existing .NET code easily. You don't have to scrap all of your existing code to replace it with F#. We'll start with a simple ASP.NET MVC web application and slowly add new features from F# to demonstrate where it can be of benefit in your projects.">
		<meta name="author" content="Ryan Riley">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		
		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
		
		<link rel="stylesheet" href="css/main.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<script>
			// If the query includes 'print-pdf' we'll use the PDF print sheet
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>
	
	<body>
		
		<div class="reveal">

			<!-- Used to fade in a background when a specific slide state is reached -->
			<div class="state-background"></div>

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-markdown>
					# F# for C# Developers
				</section>

				<section data-markdown>
					## Ryan Riley
					* [F# MVP](https://mvp.support.microsoft.com/profile/Ryan.Riley)
					* Blog at [wizardsofsmart.net](http://wizardsofsmart.net/)
					* OSS: [FSharpx](http://github.com/fsharp/fsharpx), [Fracture](http://github.com/fractureio/fracture), [Frank](http://github.com/frank-fs/frank), and [WebApiContrib](http://github.com/WebApiContrib)
					* [Community for F#](http://c4fsharp.net/) virtual user group
				</section>

				<section data-markdown>
					## Agenda
					1. Why learn F#?
					1. Calculating with Units of Measure
					1. Access data with Type Providers
					1. Render a JavaScript control with WebSharper
					1. Expose a web API with Frank
					1. Manage the cloud with M-Brace
				</section>

				<section data-markdown>
					## Lessons to be Learned
					* Proper use of <acronym title="functional programming">FP</acronym> and <acronym title="object-oriented programming">OOP</acronym>
					* Objects for state and boundary control
					* Functions for implementation
					* Build behaviors from smaller pieces

					<aside class="notes">
						Note that building behaviors will be covered by the use of Frank and WebSharper.
					</aside>
				</section>

				<section data-markdown>
					## Understanding OOP
					### Enabling asynchrony

					<blockquote cite="http://userpage.fu-berlin.de/~ram/pub/pub_jf47ht81Ht/doc_kay_oop_en">
						I thought of objects being like biological cells and/or individual computers on a network, only able to communicate with messages ...
						OOP to me means only messaging, local retention and protection and hiding of state-process, and extreme late-binding of all things.
					</blockquote>
					Alan Kay
				</section>

				<section data-markdown>
					## FP + OOP

					<blockquote cite="http://michaelfeathers.typepad.com/michael_feathers_blog/2012/03/tell-above-and-ask-below-hybridizing-oo-and-functional-design.html">
						Object-orientation is better for the higher levels of a system, and functional programming is better for the lower levels.
					</blockquote>
					Michael Feathers
				</section>

				<section data-markdown>
					## Understanding FP

					1. Purity -&gt; [lazy evaluation](http://blogs.msdn.com/b/ericwhite/archive/2006/10/04/fp-tutorial.aspx)
					1. Repeatable
					1. Focus on algorithms and data structures
				</section>

				<section>
					<section data-markdown>
						## Less is More

						<blockquote cite="http://www.altdevblogaday.com/2011/12/24/static-code-analysis/">
							There was a paper recently that noted that all of the various code quality metrics correlated at least as strongly with code size as error rate, making code size alone give essentially the same error predicting ability.  Shrink your important code.
						</blockquote>
						John Carmack
					</section>

					<section data-markdown>
						## Pattern Shift
						* Command pattern or function?
						* Strategy pattern or function?
						* Composite pattern or function composition? 
						* Chain-of-Responsibility or list of functions?
						* State mutating or immutability?
						* Object extensions or &quot;pipes and filters&quot;?

						<a href="http://www.amazon.com/gp/product/1933988924/ref=as_li_ss_il?ie=UTF8&camp=1789&creative=390957&creativeASIN=1933988924&linkCode=as2&tag=panesofglass-20"><img border="0" src="http://ws.assoc-amazon.com/widgets/q?_encoding=UTF8&ASIN=1933988924&Format=_SL160_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=panesofglass-20" ></a><img src="http://www.assoc-amazon.com/e/ir?t=panesofglass-20&l=as2&o=1&a=1933988924" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />

						<aside class="notes">
							Switch to FSI and walk through building a command vs. using a function
							Strategy is also a good way to correlate the signature of a simple interface to that of a function.
							Possibly work through the differences between method chaining by extension and F# piping
						</aside>
					</section>

					<section data-markdown>
						## State at the Edges

						<blockquote cite="http://lambda-the-ultimate.org/node/3619">
							Mock objects and dependency injection are just for people who don't know math.
						</blockquote>
						Erik Meijer
					</section>
				</section>

				<section>
					<section>
						<h2>OOP in F#</h2>
						<a href="http://blogs.msdn.com/b/timng/archive/2010/04/05/f-object-oriented-programming-quick-guide.aspx">F# Quick Guides: Object Oriented Programming</a>
					</section>

					<section data-markdown>
						<h2>An exemplary object in F#</h2>
						<pre><code contenteditable>type Message&lt;'T&gt; =
    | Process of 'T
    | Stop

type Exemplary(target) =
    let agent = MailboxProcessor.Start(fun inbox -&gt;
        let state = new State()
        let rec loop () = async {
            let! msg = inbox.Receive()
            match msg with
            | Process data -&gt; 
                // do something with the data and/or other state
                // or pass something to the target
                return loop()
            | Stop -&gt; ()
        }
        loop ()
    )
    member this.Post(msg: Message&lt;'T&gt;) = agent.Post(msg)

let obj = Exemplary&lt;_&gt;(target)
obj.Post(Process "hello")</code></pre>
					</section>

					<section data-markdown>
						<h2>Functions as data</h2>
						<pre><code contenteditable>type Message&lt;'T&gt; = Handle of 'T -&gt; unit
                 | Process of 'T
                 | Stop

type Exemplary&lt;'T&gt;() =
    let agent = MailboxProcessor.Start(fun inbox -&gt;
        let state = new State()
        let rec loop () = async {
            let! msg = inbox.Receive()
            match msg with
            | Handle f -&gt; f state; return loop()
            | Process data -&gt; return loop()
            | Stop -&gt; ()
        }
        loop ()
    )
    member this.Post(msg: Message&lt;'T&gt;) = agent.Post(msg)

let target = Exemplary&lt;_&gt;()
let obj = Exemplary&lt;_&gt;()
obj.Post(Process(fun data -&gt; target.Post(Handle data)))</code></pre>
					</section>
				</section>

				<section>
					<h2>Unique Features of F#</h2>
				</section>

				<section data-markdown>
					## Units of Measure
					<pre><code contenteditable>// Distance, meters. 
[&lt;Measure&gt;] type m 
// Time, seconds. 
[&lt;Measure&gt;] type s

let genericSumUnits ( x : float&lt;&apos;u&gt;) (y: float&lt;&apos;u&gt;) = x + y

let v1 = 3.1&lt;m/s&gt;
let v2 = 2.7&lt;m/s&gt;
let x1 = 1.2&lt;m&gt;
let t1 = 1.0&lt;s&gt;

// OK: a function that has unit consistency checking. 
let result1 = genericSumUnits v1 v2
// Error reported: mismatched units. 
// Uncomment to see error. 
// let result2 = genericSumUnits v1 x1</code></pre>
				</section>

				<section>
					<section data-markdown>
						## Type Providers

						<aside class="notes">
							Show the code required to access the world bank data from the HttpClient sample versus the WorldBankProvider.
						</aside>
					</section>

					<section data-markdown>
						## HttpClient
						<pre><code contenteditable>HttpClient client = new HttpClient();

client.GetAsync(_address).ContinueWith(requestTask =&gt;
{
    HttpResponseMessage response = requestTask.Result;
    response.EnsureSuccessStatusCode();
    response.Content.ReadAsAsync<JsonArray>().ContinueWith(readTask =&gt;
    {
        foreach (var country in readTask.Result[1])
        {
            Console.WriteLine(&quot;{0}, {1}, {2}, {3}, {4}&quot;,
                country.Value[&quot;name&quot;],
                country.Value[&quot;iso2Code&quot;],
                country.Value[&quot;capitalCity&quot;],
                country.Value[&quot;latitude&quot;],
                country.Value[&quot;longitude&quot;]);
        }
    });
});</code></pre>
					</section>
					<section>
						<h2>World Bank Provider</h2>
						<pre><code contenteditable>// Get average university enrollment for North American countries
let avgEnrollment =
    [ for c in WorldBank.Regions.``North America`` do
        yield! c.``School enrollment, tertiary (% gross)`` ]
    |&gt; Seq.groupBy fst
    |&gt; Seq.map (fun (y, v) -&gt; y, Seq.averageBy snd v)
    |&gt; Array.ofSeq
    |&gt; Array.sortBy fst

// Create list of other countries that we want to plot
let countries = 
  [ WorldBank.Countries.``United States``, Color.DarkRed
    WorldBank.Countries.Canada, Color.DarkGreen ]

// Compare countries with EU average
FSharpChart.Combine
  [ yield FSharpChart.NiceLine(avgEnrollment, "NA", Color.Blue)
    for country, clr in countries do
      let data = country.``School enrollment, tertiary (% gross)``
      yield FSharpChart.NiceLine(data, unbox country, clr) ]
  |&gt; FSharpChart.NiceChart</code></pre>;
					</section>
				</section>

				<section>
					<h2>Structured Documents</h2>
					<img src="img/structured-documents.png" />

					<aside class="notes">
						Demo use of StructuredJSON from F#x.
					</aside>
				</section>

				<section data-markdown>
					## Integrating Type Providers
				</section>

				<section data-markdown>
					## Adding Album Search

					1. As a reusable control
					1. As a Web API

					<aside class="notes">
						Here we will use the ODataService type provider to allow searching Netflix movie data.
						We could easily mix multiple providers here; but we will use just the one to keep things simple.
					</aside>
				</section>

				<section data-markdown>
					## Controls with WebSharper

					<aside class="notes">
						Build a simple search control using WebSharper to call the server, execute the search, and render the list of results.
					</aside>
				</section>

				<section data-markdown>
					## Composing Web APIs with Frank

					<aside class="notes">
						Similar to the above, but here we will use the Frank combinator library to expose the results as an API.
						Note, this is a contrived example.
					</aside>
				</section>

				<section>
					<section data-markdown>
						## Embracing the Cloud

						1. F# and Map Reduce
						1. [{m}](http://www.m-brace.net/)
					</section>

					<section data-markdown>
						## F# and Map Reduce
						1. [F# and Hadoop](http://blogs.msdn.com/b/carlnol/archive/2011/12/16/hadoop-streaming-and-f-mapreduce.aspx)
						1. [MSDN article](http://msdn.microsoft.com/en-us/magazine/gg983490.aspx)
						1. [Matt Podwysocki's blog](http://weblogs.asp.net/podwysocki/archive/2009/03/03/exploring-mapreduce-with-f.aspx)
					</section>

					<section data-markdown>
						## {m} Brace 

						[Sneak preview](http://www.youtube.com/watch?v=fmTagG6MNPQ&feature=plcp)

						[Learn more](http://www.m-brace.net/)
					</section>
				</section>

				<section data-markdown>
					## Learning more
				
					* http://fsharp.net/
					* http://tryfsharp.org/
					* http://fsharp3sample.codeplex.com/
					* http://fssnip.net/
					* http://fpish.net/
					* http://c4fsharp.net/
					* http://websharper.com/
					* http://www.m-brace.net/
				</section>

				<section data-markdown>
					# THE END
					### BY Ryan Riley
				</section>
			</div>

			<!-- The navigational controls UI -->
			<aside class="controls">
				<a class="left" href="#">&#x25C4;</a>
				<a class="right" href="#">&#x25BA;</a>
				<a class="up" href="#">&#x25B2;</a>
				<a class="down" href="#">&#x25BC;</a>
			</aside>

			<!-- Presentation progress bar -->
			<div class="progress"><span></span></div>
			
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>
			
			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				
				theme: Reveal.getQueryHash().theme || 'default', // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/linear(2d)

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/highlight.js', async: true, callback: function() { window.hljs.initHighlightingOnLoad(); } },
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'lib/js/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'lib/js/data-markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'socket.io/socket.io.js', async: true, condition: function() { return window.location.host === 'localhost:1947'; } },
					{ src: 'plugin/speakernotes/client.js', async: true, condition: function() { return window.location.host === 'localhost:1947'; } },
				]
			});
			
		</script>

	</body>
</html>
